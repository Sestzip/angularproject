"use strict";(self.webpackChunkUserManagement=self.webpackChunkUserManagement||[]).push([[426],{426:(S,l,r)=>{r.r(l),r.d(l,{ManageChatModule:()=>y});var p=r(9808),m=r(294),d=r(8493),a=r(2382),e=r(4893),h=r(6070);function u(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.SendMessage)}}function f(n,o){if(1&n&&e._UZ(0,"img",27),2&n){const t=e.oxw(2).$implicit;e.Q6J("src",t.SendMessage,e.LSH)}}function x(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"span",23),e._uU(4),e._UZ(5,"img",24),e.qZA(),e.YNc(6,u,2,1,"p",25),e.YNc(7,f,1,1,"img",26),e.TgZ(8,"span",23),e._uU(9),e.qZA()()()()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(4),e.Oqu(i.userName),e.xp6(2),e.Q6J("ngIf",!1===t.SendImage),e.xp6(1),e.Q6J("ngIf",!0===t.SendImage),e.xp6(2),e.Oqu(t.SendTime)}}function _(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.ReceiveMessage)}}function C(n,o){if(1&n&&e._UZ(0,"img",27),2&n){const t=e.oxw(2).$implicit;e.Q6J("src",t.ReceiveMessage,e.LSH)}}function M(n,o){if(1&n&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"span",31),e._UZ(4,"img",32),e._uU(5),e.qZA(),e.YNc(6,_,2,1,"p",25),e.YNc(7,C,1,1,"img",26),e.TgZ(8,"span",31),e._uU(9),e.qZA()()()()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.ReceiveName),e.xp6(1),e.Q6J("ngIf",!1===t.ReceiveImage),e.xp6(1),e.Q6J("ngIf",!0===t.ReceiveImage),e.xp6(2),e.Oqu(t.ReceiveTime)}}function v(n,o){if(1&n&&(e.ynx(0),e.YNc(1,x,10,4,"div",18),e.YNc(2,M,10,4,"div",19),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",""!=t.SendMessage),e.xp6(1),e.Q6J("ngIf",""!=t.ReceiveMessage)}}const b=[{path:"",children:[{path:"",component:(()=>{class n{constructor(t){this.fb=t,this.date=new Date,this.data="",this.chatArray=[]}ngOnInit(){if(this.chatForm=this.fb.group({chatField:["",[a.kI.required]]}),this.checkArrayExist(JSON.parse(localStorage.getItem("userList")))){const t=JSON.parse(localStorage.getItem("userList")).filter(i=>!0===i.IsActive);this.checkArrayExist(t)&&(this.userName=t[0].FullName.split(" ")[0],this.checkArrayExist(JSON.parse(localStorage.getItem("groupChat")))&&(this.chatArray=JSON.parse(localStorage.getItem("groupChat"))))}}sendMessage(t){const i=new Date;this.data=this.chatForm.controls.chatField.value;let g=(0,p.p6)(i,"dd-MM-yyyy hh:mm:ss a","en-US","+0530");this.chatModal={SendMessage:!1===t?this.data:JSON.parse(localStorage.getItem("recent-image")),SendName:this.userName,SendTime:g,SendImage:!1!==t,ReceiveMessage:"",ReceiveName:"System",ReceiveTime:"",ReceiveImage:!1!==t},this.chatArray.push(this.chatModal);var s=this.chatArray.filter(c=>c.SendTime===g);setTimeout(()=>{s[0].ReceiveMessage=!1===t?this.data:JSON.parse(localStorage.getItem("recent-image"));var c=i.setSeconds(i.getSeconds()+3);s[0].ReceiveTime=(0,p.p6)(c,"dd-MM-yyyy hh:mm:ss a","en-US","+0530"),localStorage.setItem("groupChat",JSON.stringify(this.chatArray)),localStorage.removeItem("recent-image")},3e3),this.chatForm.reset()}importFile(t){if(0!=t.target.files.length){var i=new FileReader;i.onloadend=g=>{localStorage.setItem("recent-image",JSON.stringify(i.result)),this.sendMessage(!0)},i.readAsDataURL(t.target.files[0])}}checkArrayExist(t){return void 0!==t&&null!=t&&null!=t.length&&t.length>0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-group-chat"]],decls:22,vars:4,consts:[[1,"card",2,"border","1px solid black","font-weight","bold","text-align","center","height","29px"],[1,"card-header",2,"font-weight","bold","text-align","center","margin-top","1px"],[1,"card",2,"border","1px solid black","font-weight","bold","text-align","center","height","63%"],[1,"message-box"],[4,"ngFor","ngForOf"],[1,"card",2,"border","1px solid black","font-weight","bold","text-align","center","height","35px"],[1,"row"],[1,"col-md-2"],[2,"float","right","margin-top","1px"],[3,"formGroup"],[1,"col-md-8"],["type","text","formControlName","chatField","placeholder","Enter a message...",2,"width","100%"],["type","file","accept","image/*",2,"display","none",3,"click","change"],["fileUpload",""],["title","Send",1,"rounded-circle",2,"background-color","lightskyblue","width","26%","border-radius","19px","float","left",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-paper-plane"],["title","Choose Image",1,"rounded-circle",2,"background-color","lightskyblue","width","26%","border-radius","19px","margin-left","2px","float","left",3,"click"],["aria-hidden","true",1,"fa","fa-file-image-o"],["class","outgoing-chat",4,"ngIf"],["class","recieved-chat-msg",4,"ngIf"],[1,"outgoing-chat"],[1,"outgoing-chat-msg"],[1,"outgoing-msg-inbox"],[1,"send-time"],["src","assets/image/user.png",2,"width","18px"],[4,"ngIf"],["style","width: 82px;",3,"src",4,"ngIf"],[2,"width","82px",3,"src"],[1,"recieved-chat-msg"],[1,"recieved-chat-msg-box"],[1,"recieved-chat-msg-inbox"],[1,"recieve-time"],["src","assets/image/admin.png",2,"width","15px"]],template:function(t,i){if(1&t){const g=e.EpF();e._UZ(0,"app-menu"),e.TgZ(1,"div",0)(2,"h4",1),e._uU(3,"Group Chats"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3),e.YNc(6,v,3,2,"ng-container",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"p",8),e._uU(11),e.qZA()(),e.TgZ(12,"form",9)(13,"div",10),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",7)(16,"input",12,13),e.NdJ("click",function(){return e.CHM(g),e.MAs(17).value=null})("change",function(c){return i.importFile(c)}),e.qZA(),e.TgZ(18,"button",14),e.NdJ("click",function(){return i.sendMessage(!1)}),e._UZ(19,"i",15),e.qZA(),e.TgZ(20,"button",16),e.NdJ("click",function(){return e.CHM(g),e.MAs(17).click()}),e._UZ(21,"i",17),e.qZA()()()()()}2&t&&(e.xp6(6),e.Q6J("ngForOf",i.chatArray),e.xp6(5),e.Oqu(i.userName),e.xp6(1),e.Q6J("formGroup",i.chatForm),e.xp6(6),e.Q6J("disabled",i.chatForm.invalid))},directives:[h.M,p.sg,p.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[".container[_ngcontent-%COMP%]{max-width:406px!important;margin:3% auto auto;font-family:sans-serif;letter-spacing:.5%}.chat-page[_ngcontent-%COMP%]{padding:0 0 50px}.msg-inbox[_ngcontent-%COMP%]{border:1px solid #ccc;overflow:hidden;padding-bottom:0;background-color:#d3d3d338}.chats[_ngcontent-%COMP%]{padding:30px 15px 0 25px}.msg-date[_ngcontent-%COMP%]{margin:2px}.msg-date[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.msg-page[_ngcontent-%COMP%]{height:431px}.default-recieved-chat[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;width:192%}.recieved-chat-msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;width:92%}.recieved-chat-msg-inbox[_ngcontent-%COMP%]{float:left}.recieved-chat-msg-inbox[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#f4cfcf;color:#646464;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:75%;border-radius:10px 10px 10px 1px}.outgoing-chat[_ngcontent-%COMP%]{overflow:hidden;margin:-5px 20px}.outgoing-msg-inbox[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#ff7200;border-radius:10px 10px 1px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:100%}.outgoing-chat-msg[_ngcontent-%COMP%]{float:right;margin-left:31%}.outgoing-chat-img[_ngcontent-%COMP%]{display:inline-block;width:20px}.recieve-time[_ngcontent-%COMP%]{text-align:left;color:#777;display:block;font-size:8px;margin:2px 0 0}.send-time[_ngcontent-%COMP%]{color:#777;display:block;font-size:8px;margin:2px 0 0;text-align:right}.msg-bottom[_ngcontent-%COMP%]{position:relative;height:10px;size:50px;padding-bottom:-6px}.input-group[_ngcontent-%COMP%]{margin-top:13px;margin-right:20px;outline:none!important;border-radius:20px;width:91%!important;background-color:#fff;margin-left:-28px}.form-control[_ngcontent-%COMP%]{border:none!important;size:0px}.form-control[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{border-color:none!important;box-shadow:none!important}.span[_ngcontent-%COMP%]{width:30px;margin-right:1px}.mate[_ngcontent-%COMP%]{width:29px;margin-left:-22px}.matebox[_ngcontent-%COMP%]{width:391px;width:389px;margin-left:0;margin-top:1px}.message-box[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),n})(),data:{title:"Group Chat"}}]}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(b)],d.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,m.I,O,a.UX,a.u5]]}),n})()}}]);